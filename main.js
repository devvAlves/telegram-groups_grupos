// Dicionário de traduções
const translations = {
            pt: {
                metaTitle: "🔥 Packs VIP: Larissa Manoela, Key Alves, Mel Maia e Mais no Telegram Putarias 🔥",
                metaDescription: "Acesso VIP aos packs e vídeos de Larissa Manoela, Key Alves, Mel Maia, MC Mirella e outras. Conteúdo do OnlyFans e Privacy direto no seu Telegram. Entre no grupo mais quente.",
                mainHeadline: "🔥 Acesso Proibido ao Conteúdo VIP +18 🔥",
                subHeadline: "Os melhores Packs de Famosas, vídeos de OnlyFans e nudes do Privacy que os donos da internet não querem que você veja. Tudo no nosso grupo Telegram, sem censura.",
                ctaHero: "👉 QUERO ACESSO VIP AGORA 👈",
                seeMore: "👇Ver mais detalhes👇",
                previewTitle: "Uma Prévia dos Packs e Vídeos VIP...",
                preview1: "PACKS DE NOVINHAS",
                preview2: "ONLYFANS VAZADOS",
                preview3: "PRIVACY SEM CENSURA",
                socialProofTitle: "Não seja o último otário a entrar no grupo.",
                socialProofSubtitle: "Junte-se aos <span class='text-red-500 font-bold'>+127.451</span> membros VIPs.",
                accessesLeft: "🔥 ACESSOS RESTANTES: <span id='countdown'>07</span> 🔥",
                lastPayment: "✅ Último pagamento confirmado via Pix às <span id='pix-time'>10:45</span>",
                testimonial1Text: "Mano, melhor grupo de packs da vida. Cancelei todas as outras assinaturas. Isso aqui é outro nível de conteúdo adulto.",
                testimonial1Author: "- Lucas S., Membro VIP",
                testimonial2Text: "Puta que pariu, tem vídeo do OnlyFans aqui que eu nem sabia que existia. Valeu cada centavo, porra!",
                testimonial2Author: "- Fernando R., Membro desde 2023",
                ctaExtra: "👉 QUERO ACESSO IMEDIATO AOS PACKS 👈",
                mostWantedTitle: "OS PACKS MAIS PROCURADOS",
                mostWantedSubtitle: "Acesso imediato ao conteúdo que todos querem ver.",
                mostWantedNames: ["Larissa Manoela", "Key Alves", "Mel Maia", "MC Mirella", "Tati Zaqui", "Geisy Arruda", "E MUITO MAIS..."],
                comparisonTitle: "A ESCOLHA É TUA, MANO.",
                tableBenefit: "Benefício",
                tableFree: "FREE (Você agora)",
                tableVIP: "VIP (Elite)",
                benefit1: "Packs Vazados semanais",
                benefit2: "Influencers exclusivas",
                benefit3: "Vídeos \"Caiu na Net\"",
                benefit4: "Conteúdo Privacy",
                benefit5: "Acesso a Packs de Famosas",
                benefit6: "Conteúdo exclusivo de Novinhas",
                benefit7: "Atualizações diárias",
                benefit8: "Acesso vitalício",
                benefit9: "Suporte privado",
                faqTitle: "DÚVIDAS ANTES DE METER O LOUCO?",
                faq1Title: "O que eu vou receber no acesso VIP?",
                faq1Answer: "Acesso total e irrestrito ao nosso canal VIP no Telegram com tudo que tem direito. Packs, vídeos, nudes, o caralho a quatro. Atualizado TODO DIA.",
                faq2Title: "Como faço o pagamento?",
                faq2Answer: "Clicando no botão, tu vai ser direcionado. Pix, cartão, boleto... a gente aceita até tua alma.",
                faq3Title: "O acesso ao grupo de Telegram é sigiloso?",
                faq3Answer: "100% Discreto, irmão. Ninguém vai saber que tu é um tarado. Fica só entre nós.",
                faq4Title: "Tem garantia?",
                faq4Answer: "🚨 Garantia de 7 dias: se não tiver putaria de qualidade, a gente devolve teu dinheiro. Simples assim.",
                ctaFooter: "🔞 NÃO PERCA - ENTRE AGORA 🔞",
                urgencyText: "🔥 ÚLTIMAS HORAS",
                peopleWatching: "+847 pessoas visualizando agora",
                immediateAccess: "✅ ACESSO IMEDIATO",
                secureTelegram: "Via Telegram seguro",
                popupEnter: "acabou de entrar no grupo VIP!",
                pageExpires: "⏰ Esta página expira em",
                // Novas traduções para notificações
                notifications: [
                    "🔥 Carlos M. acabou de garantir acesso VIP",
                    "💎 Ana R. entrou no grupo há 2 minutos", 
                    "⚡ Pedro S. confirmou pagamento agora",
                    "🚀 Mariana L. desbloqueou conteúdo exclusivo"
                ],
                soldOut: "ESGOTADO!",
                // Links específicos para português
                links: {
                    hero: "https://t.me/postv2rog_bot?start=via_site",
                    mid: "https://t.me/postv2rog_bot?start=via_site_mid",
                    footer: "https://t.me/postv2rog_bot?start=via_site_footer",
                    popup: "https://t.me/postv2rog_bot?start=via_site_popup"
                }
            },
            en: {
                metaTitle: "🔥 VIP Packs: Belle Delphine, Amouranth, Corinna Kopf and More on Telegram Premium 🔥",
                metaDescription: "VIP access to packs and videos of Belle Delphine, Amouranth, Corinna Kopf, Pokimane and others. OnlyFans and exclusive content directly on your Telegram. Join the hottest group.",
                mainHeadline: "🔥 Forbidden Access to VIP Content +18 🔥",
                subHeadline: "The best Celebrity Packs, OnlyFans videos and exclusive nudes that internet owners don't want you to see. Everything in our Telegram group, uncensored.",
                ctaHero: "👉 I WANT VIP ACCESS NOW 👈",
                seeMore: "👇See more details👇",
                previewTitle: "A Preview of VIP Packs and Videos...",
                preview1: "YOUNG GIRL PACKS",
                preview2: "LEAKED ONLYFANS",
                preview3: "UNCENSORED PREMIUM",
                socialProofTitle: "Don't be the last sucker to join the group.",
                socialProofSubtitle: "Join <span class='text-red-500 font-bold'>+127,451</span> VIP members.",
                accessesLeft: "🔥 REMAINING ACCESS: <span id='countdown'>07</span> 🔥",
                lastPayment: "✅ Last payment confirmed via Card at <span id='pix-time'>10:45</span>",
                testimonial1Text: "Dude, best pack group ever. Cancelled all other subscriptions. This is another level of adult content.",
                testimonial1Author: "- Lucas S., VIP Member",
                testimonial2Text: "Holy shit, there's OnlyFans video here that I didn't even know existed. Worth every penny, damn!",
                testimonial2Author: "- Fernando R., Member since 2023",
                ctaExtra: "👉 I WANT IMMEDIATE ACCESS TO THE PACKS 👈",
                mostWantedTitle: "THE MOST WANTED PACKS",
                mostWantedSubtitle: "Instant access to the content everyone wants to see.",
                mostWantedNames: ["Belle Delphine", "Amouranth", "Corinna Kopf", "Pokimane", "Addison Rae", "Tana Mongeau", "AND MANY MORE..."],
                comparisonTitle: "THE CHOICE IS YOURS, DUDE.",
                tableBenefit: "Benefit",
                tableFree: "FREE (You now)",
                tableVIP: "VIP (Elite)",
                benefit1: "Weekly Leaked Packs",
                benefit2: "Exclusive Influencers",
                benefit3: "\"Leaked\" Videos",
                benefit4: "Premium Content",
                benefit5: "Access to Celebrity Packs",
                benefit6: "Exclusive Young Girl Content",
                benefit7: "Daily Updates",
                benefit8: "Lifetime Access",
                benefit9: "Private Support",
                faqTitle: "DOUBTS BEFORE GOING CRAZY?",
                faq1Title: "What will I receive in VIP access?",
                faq1Answer: "Total and unrestricted access to our VIP Telegram channel with everything you deserve. Packs, videos, nudes, the whole damn thing. Updated EVERY DAY.",
                faq2Title: "How do I make the payment?",
                faq2Answer: "By clicking the button, you'll be redirected. Card, PayPal, crypto... we accept even your soul.",
                faq3Title: "Is Telegram group access confidential?",
                faq3Answer: "100% Discreet, brother. No one will know you're a pervert. It stays between us.",
                faq4Title: "Is there a guarantee?",
                faq4Answer: "🚨 7-day guarantee: if there's no quality content, we'll refund your money. Simple as that.",
                ctaFooter: "🔞 JOIN VIP GROUP NOW 🔞",
                urgencyText: "🔥 LAST HOURS",
                peopleWatching: "+847 people watching now",
                immediateAccess: "✅ IMMEDIATE ACCESS",
                secureTelegram: "Via secure Telegram",
                popupEnter: "just joined the VIP group!",
                pageExpires: "⏰ This page expires in",
                // Novas traduções para notificações em inglês
                notifications: [
                    "🔥 John D. just secured VIP access",
                    "💎 Sarah M. joined the group 2 minutes ago",
                    "⚡ Mike R. confirmed payment now", 
                    "🚀 Emma K. unlocked exclusive content"
                ],
                soldOut: "SOLD OUT!",
                // Links específicos para inglês
                links: {
                    hero: "https://t.me/postv2rog_bot?start=via_site",
                    mid: "https://t.me/postv2rog_bot?start=via_site_mid",
                    footer: "https://t.me/postv2rog_bot?start=via_site_footer",
                    popup: "https://t.me/postv2rog_bot?start=via_site_popup"
                }
            }
        };

// Função para configurar o idioma
function setLanguage(lang) {
    if (!translations[lang]) lang = 'pt';
    document.documentElement.lang = lang;

    const trans = translations[lang];
    document.title = trans.metaTitle;
    document.getElementById('meta-title').textContent = trans.metaTitle;
    document.getElementById('meta-description').setAttribute('content', trans.metaDescription);

    document.querySelectorAll('a[href*="t.me"]').forEach(link => {
        const href = link.getAttribute('href');
        link.href = trans.links[href.includes('via_site_footer') ? 'footer' : href.includes('via_site_mid') ? 'mid' : href.includes('via_site_popup') ? 'popup' : 'hero'];
    });

    const mostWantedContainer = document.getElementById('most-wanted-container');
    if (mostWantedContainer && trans.mostWantedNames) {
        mostWantedContainer.innerHTML = '';
        trans.mostWantedNames.forEach(name => {
            const span = document.createElement('span');
            span.className = 'bg-red-800 text-white font-bold py-2 px-4 rounded-full text-lg';
            span.textContent = name;
            mostWantedContainer.appendChild(span);
        });
    }

    document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        if (trans[key]) el.innerHTML = trans[key];
    });
}

// Função para inicializar a página
function initializePage() {
    const params = new URLSearchParams(window.location.search);
    const langParam = params.get('lang');
    const initialLang = langParam && translations[langParam] ? langParam : (navigator.language || navigator.userLanguage).split('-')[0];
    setLanguage(translations[initialLang] ? initialLang : 'pt');

    document.querySelectorAll('.lang-switcher').forEach(button => {
        button.addEventListener('click', e => {
            const lang = e.target.getAttribute('data-lang');
            setLanguage(lang);
            const url = new URL(window.location);
            url.searchParams.set('lang', lang);
            window.history.pushState({}, '', url);
        });
    });

    updateScarcityDisplay();
    createDynamicScarcity();
    createSmartNotifications();
}

// Função para criar escassez dinâmica
function createDynamicScarcity() {
    const scarcityElement = document.getElementById('countdown');
    if (!scarcityElement) return;

    let userSlots = localStorage.getItem('available_slots') || Math.floor(Math.random() * 5) + 3;
    localStorage.setItem('available_slots', userSlots);

    setInterval(() => {
        if (userSlots > 1) {
            userSlots--;
            localStorage.setItem('available_slots', userSlots);
            updateScarcityDisplay();
        }
    }, 30000);
}

// Função para atualizar o contador de escassez
function updateScarcityDisplay() {
    const scarcityElement = document.getElementById(`countdown-${document.documentElement.lang}`);
    if (!scarcityElement) return;

    const userSlots = localStorage.getItem('available_slots');
    scarcityElement.textContent = userSlots > 0 ? userSlots.toString().padStart(2, '0') : translations[document.documentElement.lang].soldOut || "ESGOTADO!";
}

// Função para criar notificações dinâmicas
function createSmartNotifications() {
    const notifications = {
        pt: [
            "🔥 Carlos M. garantiu acesso VIP",
            "⚡ Pedro S. confirmou pagamento agora",
            "🔥 João P. fez upgrade para VIP",
            "⚡ Rafael T. confirmou pagamento via Pix"
        ],
        en: [
            "🔥 John D. just secured VIP access",
            "⚡ Mike R. confirmed payment now",
            "🔥 Chris P. upgraded to VIP",
            "⚡ David S. paid successfully"
        ]
    };

    function showNotification() {
        const lang = document.documentElement.lang || 'pt';
        const messages = notifications[lang];
        const randomMsg = messages[Math.floor(Math.random() * messages.length)];

        const notification = document.createElement('div');
        notification.className = 'fixed bottom-5 left-5 bg-gray-800 border border-red-700 text-white text-sm p-4 rounded-lg shadow-lg z-50 animate__animated animate__slideInLeft';
        notification.innerHTML = `<div class="flex items-center space-x-2"><div class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div><span>${randomMsg}</span></div>`;
        document.body.appendChild(notification);

        setTimeout(() => {
            notification.classList.add('animate__slideOutLeft');
            setTimeout(() => notification.remove(), 500);
        }, 4000);
    }

    let interval = 15000;
    setInterval(() => {
        showNotification();
        interval = Math.max(8000, interval - 1000);
    }, interval);
}

// Função para atualizar a barra de progresso
function updateProgressBar() {
    const progressBar = document.querySelector('#cta-popup .progress-bar .progress');
    if (progressBar) {
        let progress = parseInt(progressBar.style.width) || 50; // Progresso inicial
        progress = Math.min(progress + 10, 100); // Incrementa até 100%
        progressBar.style.width = `${progress}%`;

        // Opcional: fechar popup quando progresso atingir 100%
        if (progress === 100) {
            document.getElementById('cta-popup').classList.add('hidden');
        }
    }
}

// Exemplo: Atualizar barra de progresso a cada 2 segundos
setInterval(updateProgressBar, 2000);

// Função para centralizar popups em dispositivos móveis
function adjustPopupPosition() {
    const popup = document.getElementById('cta-popup');
    if (popup) {
        const popupContent = popup.querySelector('.bg-white');
        if (popupContent) {
            const viewportHeight = window.innerHeight;
            const popupHeight = popupContent.offsetHeight;
            popupContent.style.marginTop = `${Math.max((viewportHeight - popupHeight) / 2, 10)}px`;
        }
    }
}

// Função para ajustar toasts em dispositivos móveis
function adjustToastPosition() {
    const toasts = document.querySelectorAll('.fixed.bottom-5');
    toasts.forEach(toast => {
        toast.style.left = '10px'; // Garante que o toast não fique fora da tela
        toast.style.right = '10px';
    });
}

// Atualizar posições ao redimensionar a janela
window.addEventListener('resize', () => {
    adjustPopupPosition();
    adjustToastPosition();
});

// Função para exibir o popup CTA
function showPopup() {
    const popup = document.getElementById('cta-popup');
    if (popup) {
        popup.classList.add('active');
    }
}

// Função para fechar o popup CTA
function closePopup() {
    const popup = document.getElementById('cta-popup');
    if (popup) {
        popup.classList.remove('active');
    }
}

// Adicionar evento ao botão de fechar
document.addEventListener('DOMContentLoaded', () => {
    const closeButton = document.getElementById('close-cta-popup');
    if (closeButton) {
        closeButton.addEventListener('click', closePopup);
    }

    // Exibir o popup ao chegar na seção "SEÇÃO TABELA COMPARATIVA"
    const tableSection = document.querySelector('section#comparisonTitle');
    if (tableSection) {
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    showPopup();
                }
            });
        }, { threshold: 0.5 }); // Exibir quando 50% da seção estiver visível
        observer.observe(tableSection);
    }
});

// Chamar ajustes ao carregar a página
document.addEventListener('DOMContentLoaded', () => {
    adjustPopupPosition();
    adjustToastPosition();
    // Inicializar a página
    initializePage();
});
